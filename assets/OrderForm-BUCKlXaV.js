import{R as U,j as t,W as f,r as l,B as j,w as S,S as k,T as w,X as C,Y as F,Z as R,E as p}from"./index-CDAGTLlb.js";import{A,c as D,a as y,b as T,F as W,d as B,e as c,E as d,S as M}from"./index.esm-CNvmIr3e.js";import{M as x}from"./MenuItem-BtaXB9P8.js";var a=[];for(var h=0;h<256;++h)a.push((h+256).toString(16).slice(1));function P(e,r=0){return(a[e[r+0]]+a[e[r+1]]+a[e[r+2]]+a[e[r+3]]+"-"+a[e[r+4]]+a[e[r+5]]+"-"+a[e[r+6]]+a[e[r+7]]+"-"+a[e[r+8]]+a[e[r+9]]+"-"+a[e[r+10]]+a[e[r+11]]+a[e[r+12]]+a[e[r+13]]+a[e[r+14]]+a[e[r+15]]).toLowerCase()}var m,V=new Uint8Array(16);function Q(){if(!m&&(m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(V)}var $=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const q={randomUUID:$};function J(e,r,i){if(q.randomUUID&&!r&&!e)return q.randomUUID();e=e||{};var o=e.random||(e.rng||Q)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,P(o)}const L=U.forwardRef(function(r,i){return t.jsx(A,{elevation:6,ref:i,variant:"filled",...r})}),H=D({product:y().required("Product is required"),quantity:T().required("Quantity is required").positive("Quantity must be positive").integer("Quantity must be an integer"),customerName:y().required("Customer name is required"),customerEmail:y().email("Invalid email address").required("Customer email is required")}),Z=()=>{const e=f(),[r,i]=l.useState(!1),[o,E]=l.useState(""),[g,N]=l.useState([]),v=(n,u)=>{u!=="clickaway"&&i(!1)};l.useEffect(()=>{const n=JSON.parse(localStorage.getItem("products"))||[];N(n)},[]);const I={product:"",quantity:"",customerName:"",customerEmail:""},O=(n,{resetForm:u})=>{const s={id:J(),product:n.product,quantity:n.quantity,customerName:n.customerName,customerEmail:n.customerEmail,totalAmount:n.quantity},b=JSON.parse(localStorage.getItem("orders"))||[];b.push(s),localStorage.setItem("orders",JSON.stringify(b)),E("Order placed successfully!"),i(!0),u(),setTimeout(()=>{e("/utils/order-view")},2e3)};return t.jsxs(j,{children:[t.jsx(j,{display:"flex",justifyContent:"flex-end",mb:2,children:t.jsx(S,{variant:"contained",color:"primary",component:k,to:"/utils/order-view",children:"Back"})}),t.jsx(w,{variant:"h5",gutterBottom:!0,children:"Order Form"}),t.jsx(W,{initialValues:I,validationSchema:H,onSubmit:O,children:({errors:n,touched:u})=>t.jsxs(B,{children:[t.jsxs(C,{fullWidth:!0,margin:"normal",children:[t.jsx(F,{id:"product-label",children:"Product"}),t.jsxs(c,{as:R,labelId:"product-label",id:"product",name:"product",label:"Product",fullWidth:!0,children:[t.jsx(x,{value:"",children:t.jsx("em",{children:"None"})}),g.length>0?g.map(s=>t.jsx(x,{value:s.name,children:s.name},s.id)):t.jsx(x,{disabled:!0,children:"No products available"})]}),t.jsx(d,{name:"product",component:"div",style:{color:"red"}})]}),t.jsx(c,{as:p,id:"quantity",name:"quantity",label:"Quantity",variant:"outlined",fullWidth:!0,margin:"normal",type:"number"}),t.jsx(d,{name:"quantity",component:"div",style:{color:"red"}}),t.jsx(c,{as:p,id:"customerName",name:"customerName",label:"Customer Name",variant:"outlined",fullWidth:!0,margin:"normal"}),t.jsx(d,{name:"customerName",component:"div",style:{color:"red"}}),t.jsx(c,{as:p,id:"customerEmail",name:"customerEmail",label:"Customer Email",variant:"outlined",fullWidth:!0,margin:"normal",type:"email"}),t.jsx(d,{name:"customerEmail",component:"div",style:{color:"red"}}),t.jsx(S,{type:"submit",variant:"contained",color:"primary",style:{marginTop:"16px"},children:"Submit"})]})}),t.jsx(M,{open:r,autoHideDuration:3e3,onClose:v,children:t.jsx(L,{onClose:v,severity:"success",anchorOrigin:{vertical:"top",horizontal:"center"},children:o})})]})};export{Z as default};
