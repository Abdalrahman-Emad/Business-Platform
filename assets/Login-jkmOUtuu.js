import{R as w,j as e,aa as v,r as i,W as k,B as l,T as y,ab as I,E as p,w as E,S as T}from"./index-CDAGTLlb.js";import{A as B,c as R,a as g,F as A,d as F,e as x,E as h,S as L}from"./index.esm-CNvmIr3e.js";const O=w.forwardRef(function(n,r){return e.jsx(B,{elevation:6,ref:r,variant:"filled",...n})}),W=R({email:g().email("Invalid email").required("Email is required"),password:g().min(6,"Password must be at least 6 characters").required("Password is required")}),N=()=>{const{login:d}=v(),[n,r]=i.useState(!1),[b,c]=i.useState(""),[S,u]=i.useState("success"),f=k(),m=()=>{r(!1)},j=t=>{const a=JSON.parse(localStorage.getItem("users"))||[],o=a.findIndex(s=>s.email===t.email&&s.password===t.password);if(o!==-1){const s=a[o];s.id||(s.id=Date.now(),a[o]=s,localStorage.setItem("users",JSON.stringify(a))),localStorage.setItem("loggedInUser",JSON.stringify(s)),d(),c("Login successful!"),u("success"),r(!0),i.startTransition(()=>{f("/dashboard/default")})}else c("Invalid email or password!"),u("error"),r(!0)};return e.jsxs(l,{sx:{maxWidth:400,margin:"auto",padding:3,borderRadius:2,boxShadow:3,backgroundColor:"background.paper",marginTop:"10%"},children:[e.jsx(y,{variant:"h5",gutterBottom:!0,align:"center",children:e.jsx(I,{})}),e.jsx(A,{initialValues:{email:"",password:""},validationSchema:W,onSubmit:j,children:({errors:t,touched:a})=>e.jsxs(F,{children:[e.jsx(l,{mb:2,children:e.jsx(x,{as:p,name:"email",type:"email",label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",helperText:e.jsx(h,{name:"email"}),error:a.email&&!!t.email})}),e.jsx(l,{mb:2,children:e.jsx(x,{as:p,name:"password",type:"password",label:"Password",variant:"outlined",fullWidth:!0,margin:"normal",helperText:e.jsx(h,{name:"password"}),error:a.password&&!!t.password})}),e.jsx(E,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Login"}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(T,{to:"/register",children:"Register"})]})]})}),e.jsx(L,{open:n,autoHideDuration:3e3,onClose:m,children:e.jsx(O,{onClose:m,severity:S,children:b})})]})};export{N as default};
